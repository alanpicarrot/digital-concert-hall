# 綠界金流前端測試步驟

## 測試目標

通過前端頁面點擊操作，測試綠界金流整合功能，確認整個購票到付款流程是否正常運作。

## 測試步驟（適合直接執行）

### 步驟一：選擇音樂會並將票券加入購物車

1. **訪問音樂會詳情頁**
   - 在瀏覽器中輸入: `/events/1`
   - 或從首頁導航到音樂會列表，選擇「莫札特鋼琴協奏曲之夜」

2. **選擇票券**
   - 在頁面右側的「選擇票券」區域找到 VIP 席
   - 點擊 "+" 按鈕增加數量至 2 張
   - 檢查總金額是否顯示 NT$ 3000 (1500 x 2)

3. **將票券加入購物車**
   - 點擊「加入購物車」按鈕
   - 確認頁面上顯示「已成功加入購物車」的提示

### 步驟二：從購物車進行結帳

1. **進入購物車**
   - 點擊頁面頂部的購物車圖標
   - 或在瀏覽器中輸入: `/cart`

2. **確認購物車內容**
   - 確認頁面顯示剛才添加的票券（莫札特鋼琴協奏曲之夜 - VIP席 x 2）
   - 確認數量為 2，單價為 NT$ 1500，小計為 NT$ 3000
   - 確認頁面底部總金額為 NT$ 3000

3. **進行結帳**
   - 點擊頁面右下方的「前往結帳」按鈕
   - 如果未登入，會跳轉到登入頁面，請使用有效的測試帳號登入
   - 完成登入後會自動返回並繼續結帳流程

### 步驟三：確認訂單並支付

1. **確認訂單詳情**
   - 在結帳頁面，檢查訂單摘要中的票券名稱、數量和價格是否正確
   - 確認總金額為 NT$ 3000
   - 確認付款方式為「信用卡支付」

2. **進行付款**
   - 點擊頁面底部的「確認付款」按鈕
   - 系統會處理付款請求，顯示「處理中...」的狀態

### 步驟四：在模擬支付頁面完成支付

1. **測試支付頁面**
   - 點擊「確認付款」後，會打開一個模擬的綠界支付頁面
   - 確認頁面顯示的訂單編號、商品名稱和金額 (NT$ 3000) 是否正確

2. **模擬成功支付**
   - 點擊「確認付款」按鈕
   - 頁面顯示「處理中...」，然後自動導向到支付結果頁

### 步驟五：確認支付結果

1. **檢查支付結果頁**
   - 成功支付後，頁面應顯示綠色對勾圖標和「支付成功」的訊息
   - 確認頁面顯示的訂單編號和金額是否正確
   - 頁面會在5秒後自動跳轉到訂單詳情頁，或可點擊「查看訂單」按鈕手動跳轉

2. **檢查訂單狀態**
   - 在訂單詳情頁，確認訂單狀態已更新為「已付款」
   - 確認所購買的票券已成功生成

### 步驟六：測試支付失敗情境（另一次測試）

1. **重複步驟 1-3，再次添加票券並到達支付頁面**

2. **模擬支付失敗**
   - 在模擬的綠界支付頁面，點擊「取消支付」按鈕
   - 系統應導向至支付失敗結果頁

3. **檢查失敗頁面**
   - 確認頁面顯示紅色 X 圖標和「支付失敗」的訊息
   - 確認頁面顯示正確的錯誤訊息
   - 可以點擊「返回購物車」或「重新嘗試」按鈕

## 測試結果記錄

測試過程中，請記錄以下信息：

- 每個步驟是否成功完成
- 訂單編號（用於跟蹤和故障排除）
- 如遇到任何錯誤，記錄錯誤訊息和發生錯誤的步驟
- 頁面響應時間是否在合理範圍內
- 支付完成後，訂單狀態是否正確更新

## 測試備註

1. 本測試使用的是測試模式，不會產生真實的金流交易
2. 測試前請確保後端服務正常運行
3. 如果測試過程中發現任何問題，請先檢查瀏覽器控制台是否有錯誤訊息
4. 如有需要，可以使用 `/api/payment/ecpay/test-notify?orderNumber=[訂單編號]&success=true` 這個管理員API來手動模擬支付成功
